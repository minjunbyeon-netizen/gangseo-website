!function(){"use strict";const t={jobs:{boardNo:2,listContainerId:"jobs-list-container",paginationId:"jobs-pagination",articleContainerId:"article-view-container",listPage:"jobs.html",viewPage:"job-view.html"},notice:{boardNo:1,listContainerId:"notice-list-container",paginationId:"notice-pagination",articleContainerId:"notice-article-view-container",listPage:"notice.html",viewPage:"notice-view.html"},gallery:{boardNo:8,listContainerId:"gallery-list-container",paginationId:"gallery-pagination",articleContainerId:"gallery-article-view-container",listPage:"gallery.html",viewPage:"gallery-view.html"}},n="https://gangseo-proxy.minjunbyeon.workers.dev",e="board_cache_",a=18e4,i=3e5;function l(t,n,a,i){return`${e}${t}_${n}_${a||0}_${i||0}`}function s(t,n){try{const e=localStorage.getItem(t);if(!e)return null;const{data:a,timestamp:i}=JSON.parse(e);return Date.now()-i>n?(localStorage.removeItem(t),null):a}catch(t){return null}}function o(t,n){try{localStorage.setItem(t,JSON.stringify({data:n,timestamp:Date.now()}))}catch(t){!function(){const t=e;for(let n=localStorage.length-1;n>=0;n--){const e=localStorage.key(n);e&&e.startsWith(t)&&localStorage.removeItem(e)}}()}}function r(t,e){const i=document.getElementById(t.listContainerId),r=document.getElementById(t.paginationId);if(!i)return;const d=l("list",t.boardNo,e,0),v=s(d,a);if(v)return void c(t,i,r,v);const g=8===t.boardNo?"gallery":2===t.boardNo?"jobs":"table";var h;i.innerHTML="table"===(h=g)?`\n                <div class="skeleton-container">\n                    ${Array(5).fill('\n                        <div class="skeleton-row">\n                            <div class="skeleton skeleton-num"></div>\n                            <div class="skeleton skeleton-title"></div>\n                            <div class="skeleton skeleton-date"></div>\n                            <div class="skeleton skeleton-views"></div>\n                        </div>\n                    ').join("")}\n                </div>\n            `:"jobs"===h?`\n                <div class="skeleton-container">\n                    ${Array(5).fill('\n                        <div class="skeleton-job-item">\n                            <div class="skeleton skeleton-badge"></div>\n                            <div class="skeleton skeleton-job-title"></div>\n                            <div class="skeleton skeleton-job-date"></div>\n                        </div>\n                    ').join("")}\n                </div>\n            `:"gallery"===h?`\n                <div class="skeleton-container skeleton-gallery">\n                    ${Array(6).fill('\n                        <div class="skeleton-gallery-card">\n                            <div class="skeleton skeleton-img"></div>\n                            <div class="skeleton skeleton-gallery-title"></div>\n                            <div class="skeleton skeleton-gallery-date"></div>\n                        </div>\n                    ').join("")}\n                </div>\n            `:'<div class="board-loading"><p>게시글을 불러오는 중...</p></div>',fetch(`${n}?action=list&board_no=${t.boardNo}&page=${e}`).then(t=>t.json()).then(n=>{n.success&&n.data&&n.data.length>0?(o(d,n),c(t,i,r,n)):i.innerHTML='<div class="board-empty"><p>등록된 게시글이 없습니다.</p></div>'}).catch(t=>{console.error("Board load error:",t),i.innerHTML='<div class="board-error"><p>게시글을 불러오는 중 오류가 발생했습니다.</p></div>'})}function c(t,n,e,a){2===t.boardNo?function(t,n,e){let a="";n.forEach(t=>{const n="구직"===t.type?"seeking":"hiring",i=t.description||"",l=`${e}?id=${t.id}`;a+=`\n                <div class="job-item">\n                    <div class="job-badge ${n}">${t.type}</div>\n                    <div class="job-info">\n                        <h4><a href="${l}">${g(t.title)}</a></h4>\n                        ${i?`<p>${g(i)}</p>`:""}\n                    </div>\n                    <div class="job-date">${t.date}</div>\n                </div>\n            `}),t.innerHTML=a}(n,a.data,t.viewPage):8===t.boardNo?function(t,n,e){let a="";n.forEach(t=>{const n=`${e}?id=${t.id}`,i=t.thumbnail||"images/placeholder.png";a+=`\n                <a href="${n}" class="gallery-card">\n                    <div class="gallery-card-img">\n                        <img src="${i}" alt="${g(t.title)}" onerror="this.src='images/placeholder.png'" loading="lazy">\n                    </div>\n                    <div class="gallery-card-info">\n                        <h4 class="gallery-card-title">${g(t.title)}</h4>\n                        <span class="gallery-card-date">${t.date}</span>\n                    </div>\n                </a>\n            `}),t.innerHTML=a}(n,a.data,t.viewPage):function(t,n,e){let a='\n            <table class="board-table">\n                <thead>\n                    <tr>\n                        <th class="num">번호</th>\n                        <th class="title">제목</th>\n                        <th class="date">작성일</th>\n                        <th class="views">조회</th>\n                    </tr>\n                </thead>\n                <tbody>\n        ';n.forEach((t,i)=>{const l=`${e}?id=${t.id}`,s=t.isNotice||!1,o=s?'<span class="notice-badge">공지</span>':t.num||n.length-i,r=t.views||"-";a+=`\n                <tr${s?' class="notice-row"':""}>\n                    <td class="num">${o}</td>\n                    <td class="title"><a href="${l}">${g(t.title)}</a></td>\n                    <td class="date">${t.date}</td>\n                    <td class="views">${r}</td>\n                </tr>\n            `}),a+="\n                </tbody>\n            </table>\n        ",t.innerHTML=a}(n,a.data,t.viewPage),function(t,n){if(!t||!n)return;let e="";const a=n.current||1,i=n.total||1,l=5;let s,o;if(i<=l)s=1,o=i;else{const t=Math.floor(l/2);s=Math.max(1,a-t),o=Math.min(i,s+l-1),o-s<l-1&&(s=Math.max(1,o-l+1))}e+=a>1?`<a href="?page=${a-1}" class="page-btn page-prev" title="이전 페이지">&lsaquo;</a>`:'<button class="page-btn page-prev" disabled title="이전 페이지">&lsaquo;</button>';for(let t=s;t<=o;t++){e+=`<a href="?page=${t}" class="page-btn ${t===a?"active":""}">${t}</a>`}e+=a<i?`<a href="?page=${a+1}" class="page-btn page-next" title="다음 페이지">&rsaquo;</a>`:'<button class="page-btn page-next" disabled title="다음 페이지">&rsaquo;</button>';t.innerHTML=e}(e,a.pagination)}function d(t,e,a){const r=l("view",t,0,e),c=s(r,i);if(c)return v(a,c.data),void(c.data.title&&(document.title=c.data.title+" | 부산강서시니어클럽"));a.innerHTML='\n            <div class="skeleton-article">\n                <div class="skeleton skeleton-article-title"></div>\n                <div class="skeleton skeleton-article-meta"></div>\n                <div class="skeleton skeleton-article-content"></div>\n            </div>\n        ',fetch(`${n}?action=view&board_no=${t}&article_id=${e}`).then(t=>t.json()).then(t=>{t.success&&t.data?(o(r,t),v(a,t.data),t.data.title&&(document.title=t.data.title+" | 부산강서시니어클럽")):a.innerHTML='<div class="board-error"><p>게시글을 찾을 수 없습니다.</p></div>'}).catch(t=>{console.error("Article load error:",t),a.innerHTML='<div class="board-error"><p>게시글을 불러오는 중 오류가 발생했습니다.</p></div>'})}function v(t,n){let e="";n.attachments&&n.attachments.length>0&&(e=`\n                <div class="article-attachments">\n                    <h4 class="attachments-title">\n                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                            <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>\n                        </svg>\n                        첨부파일\n                    </h4>\n                    <ul class="attachments-list">\n                        ${n.attachments.map(t=>`\n                            <li class="attachment-item">\n                                <a href="${t.url}" target="_blank" rel="noopener noreferrer" class="attachment-link">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>\n                                        <polyline points="7 10 12 15 17 10"/>\n                                        <line x1="12" y1="15" x2="12" y2="3"/>\n                                    </svg>\n                                    <span class="attachment-name">${g(t.name)}</span>\n                                </a>\n                            </li>\n                        `).join("")}\n                    </ul>\n                </div>\n            `);const a=`\n            <div class="article-header">\n                <h3 class="article-title">${g(n.title)}</h3>\n                <div class="article-meta">\n                    <span class="article-date">${n.date}</span>\n                </div>\n            </div>\n            <div class="article-content">\n                ${n.content||"<p>내용이 없습니다.</p>"}\n            </div>\n            ${e}\n        `;t.innerHTML=a}function g(t){if(!t)return"";const n=document.createElement("div");return n.textContent=t,n.innerHTML}document.addEventListener("DOMContentLoaded",function(){const n=new URLSearchParams(window.location.search);for(const[e,a]of Object.entries(t)){const t=document.getElementById(a.articleContainerId);if(t){const e=n.get("id");return void(e?d(a.boardNo,e,t):t.innerHTML='<div class="board-error"><p>게시글을 찾을 수 없습니다.</p></div>')}if(document.getElementById(a.listContainerId)){return void r(a,parseInt(n.get("page"))||1)}}})}();