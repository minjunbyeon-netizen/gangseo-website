!function(){"use strict";const t="https://gangseo-proxy.minjunbyeon.workers.dev",e="home-notice-list",n="home-jobs-list",a="home-recent-notice-list",r="home-gallery-list",o=3,l="home_board_",i=18e4;function s(t){try{const e=localStorage.getItem(t);if(!e)return null;const{data:n,timestamp:a}=JSON.parse(e);return Date.now()-a>i?(localStorage.removeItem(t),null):n}catch(t){return null}}function c(t,e){try{localStorage.setItem(t,JSON.stringify({data:e,timestamp:Date.now()}))}catch(t){}}function d(){console.log("Home board integration initializing...");const o=document.getElementById(e);o&&m(1,o,"notice-view.html");const i=document.getElementById(n);i&&m(2,i,"job-view.html");const d=document.getElementById(a);d&&m(1,d,"notice-view.html");const u=document.getElementById(r);u&&function(e,n,a){if(!n)return;const r=`${l}gallery_${e}`,o=s(r);if(o&&o.data&&o.data.length>0)return void g(n,o.data,a);fetch(`${t}?action=list&board_no=${e}&page=1`).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}).then(t=>{t.success&&t.data&&t.data.length>0?(c(r,t),g(n,t.data,a)):n.innerHTML='<div class="board-empty"><p>등록된 이미지가 없습니다.</p></div>'}).catch(t=>{console.error(`Home gallery ${e} load error:`,t),n.innerHTML='<div class="board-error"><p>갤러리를 불러오지 못했습니다. 잠시 후 다시 시도해주세요.</p></div>'})}(8,u,"gallery-view.html")}function m(e,n,a){if(!n)return;const r=`${l}${e}`,o=s(r);o&&o.data&&o.data.length>0?u(n,o.data,a):fetch(`${t}?action=list&board_no=${e}&page=1`).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}).then(t=>{t.success&&t.data&&t.data.length>0?(c(r,t),u(n,t.data,a)):n.innerHTML='<li><span class="title">등록된 글이 없습니다.</span></li>'}).catch(t=>{console.error(`Home board ${e} load error:`,t),n.innerHTML='<li><span class="title">불러오기 실패. 잠시 후 다시 시도해주세요.</span></li>'})}function u(t,e,n){if(!t)return;const a=e.slice(0,o);let r="";a.forEach(t=>{const e=`${n}?id=${t.id}`,a=t.date?t.date.replace(/-/g,"."):"";r+=`\n                <li>\n                    <a href="${e}">\n                        <span class="title">${h(t.title)}</span>\n                        <span class="date">${a}</span>\n                    </a>\n                </li>\n            `}),t.innerHTML=r}function g(t,e,n){if(!t)return;const a=e.slice(0,6);let r="";a.forEach(t=>{const e=`${n}?id=${t.id}`,a=t.thumbnail||"images/placeholder.png",o=t.date?t.date.replace(/-/g,"."):"";r+=`\n                <a href="${e}" class="gallery-card-home">\n                    <div class="gallery-card-img">\n                        <img src="${a}" alt="${h(t.title)}" onerror="this.src='images/placeholder.png'" loading="lazy">\n                    </div>\n                    <div class="gallery-card-info">\n                        <h4 class="gallery-card-title">${h(t.title)}</h4>\n                        <span class="gallery-card-date">${o}</span>\n                    </div>\n                </a>\n            `}),t.innerHTML=r}function h(t){if(!t)return"";const e=document.createElement("div");return e.textContent=t,e.innerHTML}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d()}();